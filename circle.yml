machine:
  java:
    version: oraclejdk8
checkout:
  post:
    - ./ci/update-version-circle-ci.sh
dependencies:
  override:
    - nvm install && ./ci/dependencies.sh
compile:
  override:
    - nvm use && ./ci/compile.sh
test:
  override:
    - nvm use && ./ci/test-circle-ci.sh
#deployment:
#  environment:
#    FUNCTIONAL_URL: https://staging.nevergreen.io
#    TRAY_USERNAME:
#    TRAY_PASSWORD:
#    TRAY_URL: https://drive.google.com/uc?export=download&id=0BzdMs1jfanaARkJJX1VRR2QtdTA
#  staging:
#    branch: master
#    owner: build-canaries
#    commands:
#      - ./ci/deploy.sh
#      - ./lein.sh test functional.functional-test
#  production:
#    tag: /v[0-9]+(\.[0-9]+)*/
#    owner: build-canaries
#    commands:
#      - ./ci/release.sh
general:
  artifacts:
    - ./target/nevergreen-standalone.jar
